[platformio]
default_envs = esp32-s3-devkitc-1

[env:esp32-s3-devkitc-1]
platform = espressif32@6.6.0
board = esp32-s3-devkitc-1
framework = arduino
monitor_speed = 115200
upload_speed = 921600
board_build.partitions = min_spiffs.csv

; Debug configuration
build_type = debug
debug_tool = esp-builtin

; LVGL configuration
build_flags = 
    -D LV_LVGL_H_INCLUDE_SIMPLE
    -D LV_CONF_INCLUDE_SIMPLE
    -D LV_CONF_PATH=lv_conf.h

; Libraries
lib_deps = 
    lvgl/lvgl@^8.4.0
    bblanchon/ArduinoJson@^6.21.3
    earlephilhower/ESP8266Audio@^1.9.7
    adafruit/Adafruit SGP30 Sensor@^2.0.2
    adafruit/Adafruit SHT31 Library@^2.2.2
    adafruit/Adafruit BusIO@^1.14.3
    bblanchon/ArduinoJson@^6.21.3
    
; Build flags for the display
build_flags = 
    -D CONFIG_LV_DISPLAY_ORIENTATION_LANDSCAPE
    -D CONFIG_LV_DISPLAY_WIDTH=800
    -D CONFIG_LV_DISPLAY_HEIGHT=480

; Debug optimization
build_unflags = -Os
build_flags = 
    -O2
    -g

; Enable PSRAM
board_build.arduino.memory_type = qio_opi
board_build.arduino.memory_psram = qio_opi
board_build.flash_mode = qio
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_build.flash_size = 16MB
board_build.partitions = default_16MB.csv

; Enable OTA updates
upload_protocol = espota
upload_port = 192.168.1.100  ; Update this with your device's IP
upload_flags =
    --auth=ota_password      ; Set a secure OTA password
    --port=3232
    --auth=ota_password

; Monitor configuration
monitor_filters = colorize, time
monitor_dtr = 0
monitor_rts = 0
